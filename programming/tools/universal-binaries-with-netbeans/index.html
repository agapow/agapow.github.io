<!doctype html>
<html lang="">
<head>
	<meta charset="utf-8"/>
	<title>Universal binaries with Netbeans - Make More Machines</title>
	<meta name="author" content="Paul Agapow">


  <meta name="description" content="How to compile a MacOS executable from C++ using the Netbeans IDE. Universal binaries are one of Apple's clever innovations that paper over the differences between architectures by including several distinct executables within a single file. When run, the OS examines the file and decides which binary to execute. Thus …">

	<meta name="twitter:card" content="summary">
	  <meta name="twitter:creator" content="@agapow">
	<meta name="twitter:title" content="Universal binaries with Netbeans">
	<meta name="twitter:description" content="How to compile a MacOS executable from C++ using the Netbeans IDE. Universal binaries are one of Apple's clever innovations that paper over the differences between architectures by including several distinct executables within a single file. When run, the OS examines the file and decides which binary to execute. Thus …">
	<meta name="twitter:url" content="/programming/tools/universal-binaries-with-netbeans/">


	<link rel="stylesheet" href="/theme/css/main.css" type="text/css" />



</head>

<body>

    <div class="container">

	  <header role="banner">
	    <div class="feeds">
	    </div>
	      <nav class="pages">
			  <a href="/about">About</a>
-			  <a href="/whereabouts">Whereabouts</a>
	      </nav>
		<a href="" class="title">Make More Machines</a>&nbsp;&nbsp;(agapow.net)
      </header>

	  <div class="wrapper">

		  <div role="main" class="content">
	<article class="full">

		<h1>Universal binaries with Netbeans</h1>

<div class="metadata">
  <time datetime="2012-01-01T12:00:00+00:00" pubdate>2012-01-01</time>
    <address class="vcard author">
      by <a class="url fn" href="/False">Paul Agapow</a>
    </address>
  in <a href="/programming/">programming</a>
</div>


      <p><em>How to compile a MacOS executable from C++ using the Netbeans IDE.</em></p>
<p>Universal binaries are one of Apple's clever innovations that paper over
the differences between architectures by including several distinct
executables within a single file. When run, the OS examines the file and
decides which binary to execute. Thus you can transparently support
Intel and PowerPC machines.</p>
<p>Strangely, for something so important, the documentation for this
feature is uneven. While there is coverage wihtin Apple techdocs, there
are outdated and obscure spots. It gets more difficult if you insist on
working outside XCode. After trial and error, I've found out how to
produce cover Universal binaries from a Netbeans C++ project.</p>
<ol class="arabic">
<li><p class="first">In Netbeans, highlight the project you are compiling and right/control/context click. Select Properties.</p>
</li>
<li><p class="first">In the ensuing dialog, select C++ Compiler.</p>
</li>
<li><p class="first">Select the editor button for Additional options. Enter:</p>
<pre class="literal-block">
-force_cpusubtype_ALL -mmacosx-version-min=10.4 -arch ppc -arch i386
</pre>
</li>
<li><p class="first">Apply the changes and compile.</p>
</li>
</ol>
<p>A similar process should work for C programs as well.</p>
<p>While the arch arguments are obvious, neglecting the first two will
result in something that looks like a universal binary, but doesn't work
like one with the cross compiled target failing. It's unclear to me if
mmacosx-version-min can realistically be set to anything earlier, but
10.4 should catch most users anyway. You can check the result with file,
and get something like this (where mesa is the executable):</p>
<pre class="literal-block">
% file mesa mesa: Mach-O universal binary with 2 architectures
mesa (for architecture ppc): Mach-O executable ppc
mesa (for architecture i386): Mach-O executable i386
</pre>


	</article>

    <p>
	<a href="https://twitter.com/share" class="twitter-share-button" data-via="" data-lang="en" data-size="large" data-related="">Tweet</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
	</p>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'agapow';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

		  </div>

		  <div class="sidebar">
		    <div class="sidebar-container" >


	            <aside>
	              <h2>About</h2>
			      <p class='summary'>
                  This site has just been restored, with most of the content
						translated automatically from its old form. Expect bugs,
						missing information and general wierdness as things
						get sorted out.
			      </p>
			    </aside>


  	          <nav>
	            <h2>Categories</h2>
	            <ul>
	                <li ><a href="/misc/">misc</a></li>
	                <li ><a href="/personal/">personal</a></li>
	                <li class="active"><a href="/programming/">programming</a></li>
	                <li ><a href="/publications/">publications</a></li>
	                <li ><a href="/science/">science</a></li>
	                <li ><a href="/software/">software</a></li>
	                <li ><a href="/talks/">talks</a></li>
	            </ul>

	            <ul>
	              <li><a href="/tags.html">all tags</a></li>
	            </ul>
	          </nav>

	            <aside>
	            <h2>Social</h2>
			      <ul class="social">
				    <li><a href="http://twitter.com/agapow">Twitter</a><i></i></li>
				    <li><a href="http://github.com/agapow">Github</a><i></i></li>
				    <li><a href="https://plus.google.com/u/0/113920832845886210876/posts">Google+</a><i></i></li>
				    <li><a href="http://uk.linkedin.com/pub/paul-michael-agapow/2/15b/184/">linkedIn</a><i></i></li>
			      </ul>
			    </aside>

	            <aside>
	              <h2>Links</h2>
	              <ul>
	                  <li><a href="http://www.imperial.ac.uk/data-science/">IC Data Science Institute</a></li>
	                  <li><a href="http://www.meetup.com/Bioinformatics-London">Bioinformatics London</a></li>
	              </ul>
	            </aside>

<a class="twitter-timeline" data-dnt="true" href="https://twitter.com/agapow" data-widget-id="336428520026812416">Tweets by @agapow</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

	        </div>
		  </div>

	  </div>

      <footer>
		<p role="contentinfo">
		  Paul Agapow - Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>. Theme <a href="https://github.com/fle/pelican-sober">pelican-sober</a>.
    	</p>

	  </footer>

	</div>


</body>
</html>